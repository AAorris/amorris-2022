# DynamoDB

DynamoDB is a NoSQL data store designed to encourage efficient access patterns.

## No Joins, NoSQL

DynamoDB has no concept of joins. Instead, you're encouraged to denormalize your data,
and have all the data you need stored together, even if that means the same data shows up
in more than one place.

In SQL databases, you're encouraged to maximize storage efficiency, and then you put the
data together when it's requested. This "duplicates" computation.

## Hash and Sort keys

Storing data in DynamoDB requires that you at least provide a hash key. This translates
to a storage partition. Data with the same hash key generally will end up living on the same
physical disks in storage.

Once data is partitioned with the hash key, tables with a sort key will be placed in-order
within that partition.

## Storage looks a bit like this

```javascript
let my_table = {
  2022: [
    { sort_key: "02-01", title: "Feb 1 2022" },
    { sort_key: "03-01", title: "Mar 1 2022" },
  ],
  2021: [
    { sort_key: "02-01", title: "Feb 1 2021" },
    { sort_key: "03-01", title: "Mar 1 2021" },
  ],
};

// Get posts from February 2022
database["2022"].filter((row) => row.sort_key.startswith("02"));
```

## Querying looks a bit like this

```javascript
client.query({
  KeyConditionExpression: "pk = :pk and begins_with(sk, :sk_prefix)",
  ExpressionAttributeValues: {
    ":pk": "2022",
    ":sk_prefix": "02",
  },
  TableName: "my_table",
  ScanIndexForward: false, // reverse
});
```
